<!DOCTYPE html>
<html lang="en-us">

<head>
  <meta charset="UTF-8">
  <title>week-3-game</title>

<!-- Linking to Boostrap CDN -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Latest compiled and minified CSS -->
<!-- Linking CSS -->
	<link rel="stylesheet" type="text/css" href="assets/css/style.css">

	<link href="https://fonts.googleapis.com/css?family=Crafty+Girls|Sniglet" rel="stylesheet">

</head>

<body>

<div class="container">

	<div class="row">

		<div class="col-md-12">

				<div class="page-header">
		    	<h1>What's the name of my flower?</h1>	    	
		    	</div>
	    
		</div>

	</div>



	<div class="row">

		<div class="col-md-8">

			<div class="row top-buffer" id="FlowerName">

				<p class="col-md-12">test</p>

			</div>

			<div class="row top-buffer" id="WinMessage">

				<p class="col-md-12">Incorrect letter guesses:</p>

			</div>

	    	<div class="row top-buffer" id="NotMatching">

				<p class="col-md-12">Letter guesses that aren't a match will appear here.</p>

			</div>
			
		</div>

		
	    
	    <div class="col-md-4">

	    	<div class="panel panel-default">
	    					
				<div class="panel-body">

					<img src="assets/images/tallsunflower.png" alt="Flower" class="img-responsive" width="350" height="850">	

				</div>
		
			</div>

		</div>

	</div>


</div>

	<footer class="footer">
      	<div class="container">
        	<p class="text-muted"><br>Copyright &copy; 2017 Kimberly Harrod</p>
      	</div>
    </footer> 


 <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>



	<script type = "text/javascript">

	// Array of possible flowers //
	var flower = ["tulip", "peony", "lily", "sunflower", "daisy", "daffodil", "rose", "lilac", "hyacinth", "marigold", "orchid", "lavender", "buttercup", "hydrangea", "coneflower"];


 	// Sets the gameFlower variable equal to a random choice from the flower array. //
    var gameFlower = flower[Math.floor(Math.random() * flower.length)];
    console.log(gameFlower);

    //Query the number of letters in the variable gameFlower and display the same number of blank spaces.//

    var wordLength = gameFlower.length;
   
   	var blankSpaces = "";

   	var notLetterMatches = "";

   	var badGuessCount = 0;

    for (var i = 0; i < wordLength; i++) {
    	blankSpaces += "_";
    } 

    document.querySelector("#FlowerName").innerHTML = blankSpaces;

   
   // Function that substitutes a character at a position in a string

   		

   		function setCharAt(str,index,chr) {
   		 	if(index > str.length-1) return str;
   		 	return str.substr(0,index) + chr + str.substr(index+1);
   		 }

    // When the user presses a key to guess a letter, run the following function...

    document.onkeyup = function(event) {
    	console.log(event.key);

        // Determine which key was pressed
        var letterGuess = event.key;
      	var matches = [];

	        for (var i = 0; i < wordLength; i++) {
	        		
	    		if (letterGuess === gameFlower.charAt(i)) { 
	    			matches.push(i);
	    		} 
	    				
    		}	

    		console.log(matches);
    		console.log(matches.length);

			

			for (var i = 0; i < matches.length; i++) {
				blankSpaces = setCharAt(blankSpaces,matches[i],letterGuess);

			}

			document.querySelector("#FlowerName").innerHTML = blankSpaces;


				if (matches.length === 0) {
					notLetterMatches += letterGuess + " ";
					console.log(letterGuess);
					badGuessCount++;
					console.log(badGuessCount);
					
				}

				document.querySelector("#NotMatching").innerHTML = notLetterMatches;
				console.log(notLetterMatches);


				if (blankSpaces === gameFlower) {
					document.querySelector("#WinMessage").innerHTML = "Yay! You guessed the flower!";
					console.log("You won!");
					document.querySelector("#NotMatching").innerHTML = "<p><a href='#' class='btn btn-info btn-med' role='button' onclick='location.reload()'>Play Again</a></p>";
					
				}

				if (badGuessCount === 7) {
					document.querySelector("#WinMessage").innerHTML = "Sorry, your guesses are up.<br>The flower was " + gameFlower + ".";
					console.log("You lost.");
				}

	 }

	

   		 
	</script>

</body>
</html>